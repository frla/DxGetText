<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN">
<HTML
><HEAD
><TITLE
>File formats</TITLE
><META
NAME="GENERATOR"
CONTENT="Modular DocBook HTML Stylesheet Version 1.76b+
"><LINK
REL="HOME"
TITLE="GNU gettext for Delphi, C++ Builder and Kylix 1.2 beta"
HREF="index.html"><LINK
REL="PREVIOUS"
TITLE="ISO 3166 country codes"
HREF="iso3166.html"><LINK
REL="NEXT"
TITLE="The format of GNU MO files"
HREF="fileformat-mo.html"></HEAD
><BODY
CLASS="APPENDIX"
BGCOLOR="#FFFFFF"
TEXT="#000000"
LINK="#0000FF"
VLINK="#840084"
ALINK="#0000FF"
><DIV
CLASS="NAVHEADER"
><TABLE
SUMMARY="Header navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TH
COLSPAN="3"
ALIGN="center"
>GNU gettext for Delphi, C++ Builder and Kylix 1.2 beta</TH
></TR
><TR
><TD
WIDTH="10%"
ALIGN="left"
VALIGN="bottom"
><A
HREF="iso3166.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="80%"
ALIGN="center"
VALIGN="bottom"
></TD
><TD
WIDTH="10%"
ALIGN="right"
VALIGN="bottom"
><A
HREF="fileformat-mo.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
></TABLE
><HR
ALIGN="LEFT"
WIDTH="100%"></DIV
><DIV
CLASS="APPENDIX"
><H1
><A
NAME="FILEFORMATS"
></A
>File formats</H1
><DIV
CLASS="SECT1"
><H1
CLASS="SECT1"
><A
NAME="FILEFORMAT-PO"
></A
>The format of GNU PO files</H1
><P
>This section was last updated august 2nd, 2003 by copying
the appropriate section from the GNU gettext manual.</P
><P
>A PO file is made up of many entries, each entry holding the relation
between an original untranslated string and its corresponding
translation.  All entries in a given PO file usually pertain
to a single project, and all translations are expressed in a single
target language.  One PO file entry has the following schematic
structure:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>white-space
#  translator-comments
#. automatic-comments
#: reference...
#, flag...
msgid "untranslated-string"
msgstr "translated-string"</PRE
></TD
></TR
></TABLE
><P
>The general structure of a PO file should be well understood by
the translator.  When using PO mode, very little has to be known
about the format details, as PO mode takes care of them for her.</P
><P
>Entries begin with some optional white space.  Usually, when generated
through GNU <TT
CLASS="LITERAL"
>gettext</TT
> tools, there is exactly one blank line
between entries.  Then comments follow, on lines all starting with the
character <TT
CLASS="LITERAL"
>#</TT
>.  There are two kinds of comments: those which have
some white space immediately following the <TT
CLASS="LITERAL"
>#</TT
>, which comments are
created and maintained exclusively by the translator, and those which
have some non-white character just after the <TT
CLASS="LITERAL"
>#</TT
>, which comments
are created and maintained automatically by GNU <TT
CLASS="LITERAL"
>gettext</TT
> tools. 
All comments, of either kind, are optional.</P
><P
>After white space and comments, entries show two strings, namely
first the untranslated string as it appears in the original program
sources, and then, the translation of this string.  The original
string is introduced by the keyword <TT
CLASS="LITERAL"
>msgid</TT
>, and the translation,
by <TT
CLASS="LITERAL"
>msgstr</TT
>.  The two strings, untranslated and translated,
are quoted in various ways in the PO file, using <TT
CLASS="LITERAL"
>"</TT
>
delimiters and <TT
CLASS="LITERAL"
>\</TT
> escapes, but the translator does not really
have to pay attention to the precise quoting format, as PO mode fully
takes care of quoting for her.</P
><P
>The <TT
CLASS="LITERAL"
>msgid</TT
> strings, as well as automatic comments, are produced
and managed by other GNU <TT
CLASS="LITERAL"
>gettext</TT
> tools, and PO mode does not
provide means for the translator to alter these.  The most she can
do is merely deleting them, and only by deleting the whole entry. 
On the other hand, the <TT
CLASS="LITERAL"
>msgstr</TT
> string, as well as translator
comments, are really meant for the translator, and PO mode gives her
the full control she needs.</P
><P
>The comment lines beginning with <TT
CLASS="LITERAL"
>#,</TT
> are special because they are
not completely ignored by the programs as comments generally are.  The
comma separated list of flags is used by the <TT
CLASS="LITERAL"
>msgfmt</TT
>
program to give the user some better diagnostic messages.  Currently
there are two forms of flags defined:</P
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="./stylesheet-images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="CENTER"
><B
>fuzzy</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>This flag can be generated by the <TT
CLASS="LITERAL"
>msgmerge</TT
> program or it can be
inserted by the translator herself.  It shows that the <TT
CLASS="LITERAL"
>msgstr</TT
>
string might not be a correct translation (anymore).  Only the translator
can judge if the translation requires further modification, or is
acceptable as is.  Once satisfied with the translation, she then removes
this <TT
CLASS="LITERAL"
>fuzzy</TT
> attribute.  The <TT
CLASS="LITERAL"
>msgmerge</TT
> program inserts this
when it combined the <TT
CLASS="LITERAL"
>msgid</TT
> and <TT
CLASS="LITERAL"
>msgstr</TT
> entries after fuzzy
search only.</P
></TD
></TR
></TABLE
></DIV
><DIV
CLASS="NOTE"
><P
></P
><TABLE
CLASS="NOTE"
WIDTH="100%"
BORDER="0"
><TR
><TD
WIDTH="25"
ALIGN="CENTER"
VALIGN="TOP"
><IMG
SRC="./stylesheet-images/note.gif"
HSPACE="5"
ALT="Note"></TD
><TH
ALIGN="LEFT"
VALIGN="CENTER"
><B
>c-format</B
></TH
></TR
><TR
><TD
>&nbsp;</TD
><TD
ALIGN="LEFT"
VALIGN="TOP"
><P
>These flags should not be added by a human.  Instead only the
<TT
CLASS="LITERAL"
>xgettext</TT
> program adds them.  In an automated PO file processing
system as proposed here the user changes would be thrown away again as
soon as the <TT
CLASS="LITERAL"
>xgettext</TT
> program generates a new template file.</P
><P
>In case the <TT
CLASS="LITERAL"
>c-format</TT
> flag is given for a string the <TT
CLASS="LITERAL"
>msgfmt</TT
>
does some more tests to check to validity of the translation.</P
></TD
></TR
></TABLE
></DIV
><P
>A different kind of entries is used for translations which involve
plural forms.</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>white-space
#  translator-comments
#. automatic-comments
#: reference...
#, flag...
msgid untranslated-string-singular
msgid_plural untranslated-string-plural
msgstr[0] "translated-string-case-0"
...
msgstr[N] "translated-string-case-n"</PRE
></TD
></TR
></TABLE
><P
>It happens that some lines, usually whitespace or comments, follow the
very last entry of a PO file.  Such lines are not part of any entry,
and PO mode is unable to take action on those lines.  By using the
PO mode function <TT
CLASS="LITERAL"
>M-x po-normalize</TT
>, the translator may get
rid of those spurious lines. </P
><P
>The remainder of this section may be safely skipped by those using
PO mode, yet it may be interesting for everybody to have a better
idea of the precise format of a PO file.  On the other hand, those
not having Emacs handy should carefully continue reading on.</P
><P
>Each of "untranslated-string and "translated-string" respects
the C syntax for a character string, including the surrounding quotes
and embedded backslashed escape sequences.  When the time comes
to write multi-line strings, one should not use escaped newlines. 
Instead, a closing quote should follow the last character on the
line to be continued, and an opening quote should resume the string
at the beginning of the following PO file line.  For example:</P
><TABLE
BORDER="0"
BGCOLOR="#E0E0E0"
WIDTH="100%"
><TR
><TD
><PRE
CLASS="SCREEN"
>msgid ""
"Here is an example of how one might continue a very long string\n"
"for the common case the string represents multi-line output.\n"</PRE
></TD
></TR
></TABLE
><P
>In this example, the empty string is used on the first line, to
allow better alignment of the <TT
CLASS="LITERAL"
>H</TT
> from the word <TT
CLASS="LITERAL"
>Here</TT
>
over the <TT
CLASS="LITERAL"
>f</TT
> from the word <TT
CLASS="LITERAL"
>for</TT
>.  In this example, the
<TT
CLASS="LITERAL"
>msgid</TT
> keyword is followed by three strings, which are meant
to be concatenated.  Concatenating the empty string does not change
the resulting overall string, but it is a way for us to comply with
the necessity of <TT
CLASS="LITERAL"
>msgid</TT
> to be followed by a string on the same
line, while keeping the multi-line presentation left-justified, as
we find this to be a cleaner disposition.  The empty string could have
been omitted, but only if the string starting with <TT
CLASS="LITERAL"
>Here</TT
> was
promoted on the first line, right after <TT
CLASS="LITERAL"
>msgid</TT
>. It was not really necessary
either to switch between the two last quoted strings immediately after
the newline <TT
CLASS="LITERAL"
>\n</TT
>, the switch could have occurred after any
other character, we just did it this way because it is neater.</P
><P
>One should carefully distinguish between end of lines marked as
<TT
CLASS="LITERAL"
>\n</TT
> inside quotes, which are part of the represented
string, and end of lines in the PO file itself, outside string quotes,
which have no incidence on the represented string.</P
><P
>Outside strings, white lines and comments may be used freely. 
Comments start at the beginning of a line with <TT
CLASS="LITERAL"
>#</TT
> and extend
until the end of the PO file line.  Comments written by translators
should have the initial <TT
CLASS="LITERAL"
>#</TT
> immediately followed by some white
space.  If the <TT
CLASS="LITERAL"
>#</TT
> is not immediately followed by white space,
this comment is most likely generated and managed by specialized GNU
tools, and might disappear or be replaced unexpectedly when the PO
file is given to <TT
CLASS="LITERAL"
>msgmerge</TT
>.</P
></DIV
></DIV
><DIV
CLASS="NAVFOOTER"
><HR
ALIGN="LEFT"
WIDTH="100%"><TABLE
SUMMARY="Footer navigation table"
WIDTH="100%"
BORDER="0"
CELLPADDING="0"
CELLSPACING="0"
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
><A
HREF="iso3166.html"
ACCESSKEY="P"
>&#60;&#60;&#60; Previous</A
></TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
><A
HREF="index.html"
ACCESSKEY="H"
>Home</A
></TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
><A
HREF="fileformat-mo.html"
ACCESSKEY="N"
>Next &#62;&#62;&#62;</A
></TD
></TR
><TR
><TD
WIDTH="33%"
ALIGN="left"
VALIGN="top"
>ISO 3166 country codes</TD
><TD
WIDTH="34%"
ALIGN="center"
VALIGN="top"
>&nbsp;</TD
><TD
WIDTH="33%"
ALIGN="right"
VALIGN="top"
>The format of GNU MO files</TD
></TR
></TABLE
></DIV
></BODY
></HTML
>